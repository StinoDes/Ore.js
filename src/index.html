<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ORE | TEST-ENV</title>
</head>
<body>
    <script>
        window.addEventListener('load', start);
        function start () {
            var bodyEl = Ore.collect('body'),
                menu = Ore.Quarry.Brick.create({
                    tree: function (tag) {
                        return tag('div', {
                            position: 'fixed',
                            top: 0, bottom: 0, left: '-{{%menuWidth}}px',
                            width: '{{%menuWidth}}px',
                            backgroundColor: '#e9e9e9',
                            ref: 'menu'
                        })
                    }
                }),
                menuButton = Ore.Quarry.Brick.create({
                    tree: function (tag) {
                        return tag('a', {
                            href: '#',
                            margin: '30px',
                            display: 'inline-block',
                            click: function () {
                                Ore.depot.dispatch({menuShown: !Ore.depot.retrieve('menuShown')});
                            }
                        },[
                            tag('img', {
                                src: 'http://www.shamrocktechnologies.com/images/hamburger.png',
                                height: '30px'
                            })
                        ])
                    }
                }),
                navigation = Ore.Quarry.Brick.create({
                    tree: function (tag, brick) {
                        return tag('nav', {
                            position: 'fixed',
                            height: '90px',
                            top: 0, left: 0, right: 0,
                            backgroundColor: '#3265E4'
                        }, [
                            brick(menuButton),
                            tag('h1', {
                                text: '{{title}}',
                                fontSize: '30px',
                                margin: '30px',
                                color: '#f5f5f5',
                                display: 'inline-block'
                            })
                        ]);
                    }
                }),
                body = Ore.Quarry.Brick.create({
                    tree: function (tag, brick) {
                        return tag('div', {}, [
                            brick(menu),
                            brick(navigation)
                        ])
                    },
                    rootMineral: bodyEl
                });
            Ore.depot = {
                menuWidth: {
                    type: 'number',
                    initial: 300
                },
                menuShown: {
                    type: 'boolean',
                    initial: false,
                    reactions: [
                        function (show) {
                            var toValue = (show)?0:-1*Ore.depot.retrieve('menuWidth');
                            menu._refs.menu.do({
                                glimmer: {
                                    styles: 'left',
                                    initial: parseInt(menu._refs.menu.extract({styles: {'left': ''}}).styles.left),
                                    toValue,
                                    duration: 800,
                                    easing: Ore.easings.BOUNCEOUT,
                                    play: true
                                }
                            })
                        }
                    ]
                }
            };
            bodyEl.do({fontFamily: 'sans-serif'});
            body.do({render:'', props: {title: 'TEST-ENV'}});
        }
    </script>
</body>
</html>